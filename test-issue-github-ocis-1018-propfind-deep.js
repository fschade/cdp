"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_chunks/files-ae3fb30d.js"),t=require("./_chunks/times-dd490b81.js");require("k6/encoding"),require("k6/http");var n=require("./_chunks/options-80deb912.js");require("k6"),require("k6/metrics"),require("k6/crypto");var a=t.times_1(1e3,(function(){return{size:1,unit:"KB"}})),r=new e.Factory(e.buildAccount({login:e.ACCOUNTS.EINSTEIN})),i={davUpload:new e.Upload,davCreate:new e.Create,davPropfind:new e.Propfind,davDelete:new e.Delete},s=n.options(e._objectSpread2({tags:{test_id:"propfind-deep",issue_url:"github.com/owncloud/ocis/issues/1018"}},function(e){var t=e.files,n=e.plays;return{thresholds:t.reduce((function(e,t){return e["".concat(n.davUpload.metricTrendName,"{asset:").concat(t.unit+t.size.toString(),"}")]=[],e["".concat(n.davCreate.metricTrendName,"{asset:").concat(t.unit+t.size.toString(),"}")]=[],e["".concat(n.davDelete.metricTrendName,"{asset:").concat(t.unit+t.size.toString(),"}")]=[],e}),{})}}({plays:i,files:a})));exports.default=function(){return function(n){var a=n.files,r=n.account,i=n.credential,s=n.plays,o=[],c="".concat(__VU,"-").concat(__ITER);s.davCreate.exec({credential:i,path:c,userName:r.login}),a.forEach((function(n){var a=n.unit+n.size.toString(),u=e.buildAsset({name:"".concat(r.login,"-dummy.zip"),unit:n.unit,size:n.size}),d=t.times_1(5,(function(){return e.randomString()})).reduce((function(e,t){return e.push(t),s.davCreate.exec({credential:i,path:e.join("/"),userName:r.login,tags:{asset:a}}),e}),[c]).join("/");s.davUpload.exec({credential:i,asset:u,path:d,userName:r.login,tags:{asset:a}}),o.push({id:a,name:u.name,folder:d})})),s.davPropfind.exec({credential:i,path:c,userName:r.login}),o.forEach((function(t){s.davDelete.exec({credential:i,userName:r.login,path:[].concat(e._toConsumableArray(t.folder.split("/")),[t.name]).join("/"),tags:{asset:t.id}})})),s.davDelete.exec({credential:i,userName:r.login,path:c})}({files:a,plays:i,credential:r.credential,account:r.account})},exports.options=s;
