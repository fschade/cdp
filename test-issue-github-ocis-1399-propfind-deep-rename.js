"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_chunks/files-ae3fb30d.js"),n=require("./_chunks/times-dd490b81.js");require("k6/encoding"),require("k6/http");var t=require("./_chunks/options-80deb912.js");require("k6"),require("k6/metrics"),require("k6/crypto");var a={size:10,unit:"KB"},r=new e.Factory(e.buildAccount({login:e.ACCOUNTS.ADMIN})),c={davCreate:new e.Create,davUpload:new e.Upload,davMove:new e.Move,davDelete:new e.Delete,davPropfind:new e.Propfind},o=t.options({tags:{test_id:"propfind-deep-rename",issue_url:"github.com/owncloud/ocis/issues/1399"}});exports.default=function(){var t={name:r.account.login,password:r.account.password,credential:r.credential},o=n.times_1(50,(function(e){return"VU-".concat(__VU,"-ITER-").concat(__ITER,"-I-").concat(e)})).reduce((function(a,r,o){return a.push([r].concat(e._toConsumableArray(n.times_1(5,(function(e){return"D-".concat(e+1)}))))),a[o].forEach((function(e,n){c.davCreate.exec({credential:t.credential,path:a[o].slice(0,n+1).join("/"),userName:t.name})})),a}),[]),i=e.buildAsset(e._objectSpread2(e._objectSpread2({},a),{},{name:"dummy.zip"}));o.forEach((function(e){e.forEach((function(n,a){c.davUpload.exec({asset:i,credential:t.credential,userName:t.name,path:e.slice(0,a+1).join("/")})}))})),o.forEach((function(n){n.forEach((function(a,r){var o="renamed-".concat(n.slice(n.length-r-1,n.length-r)),i=n.slice(0,n.length-r).join("/"),s=[].concat(e._toConsumableArray(n.slice(0,n.length-r-1)),[o]).join("/");c.davMove.exec({credential:t.credential,userName:t.name,path:i,destination:s}),c.davPropfind.exec({credential:t.credential,userName:t.name,path:s}),n[n.length-1-r]=o}))})),o.forEach((function(e){c.davDelete.exec({credential:t.credential,userName:t.name,path:e[0]})}))},exports.options=o;
