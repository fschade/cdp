"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_chunks/times-dd490b81.js"),t=require("k6/data"),a=require("./_chunks/files-ae3fb30d.js");require("k6/encoding"),require("k6/http");var n=require("k6");require("k6/metrics"),require("k6/crypto");var r=function(){function e(){a._classCallCheck(this,e)}return a._createClass(e,null,[{key:"exec",value:function(e){var t=e.credential,n=e.userName,r=e.path,i=void 0===r?"":r,s=e.tags;return a.request({method:"DELETE",credential:t,path:"/remote.php/dav/trash-bin/".concat(n,"/").concat(i),params:{tags:s}})}}]),e}(),i=function(e){a._inherits(i,e);var t=a._createSuper(i);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,r=e.metricID,s=void 0===r?"default":r;return a._classCallCheck(this,i),t.call(this,{name:n||"cloud_".concat(s,"_play_dav_trashBin_delete")})}return a._createClass(i,[{key:"exec",value:function(e){var t=e.credential,i=e.userName,s=e.path,c=e.tags;c=a._objectSpread2(a._objectSpread2({},this.tags),c);var u=r.exec({credential:t,userName:i,tags:c,path:s});return n.check(u,{"dav trashBin delete status is 204":function(){return 204===u.status}},c)||this.metricErrorRate.add(1,c),this.metricTrend.add(u.timings.duration,c),{response:u,tags:c}}}]),i}(a.Play),s={davFilesCreate:new a.Create,davFilesMove:new a.Move,davFilesUpload:new a.Upload,davFilesDownload:new a.Download,davFilesDelete:new a.Delete,davTrashBinDelete:new i},c=__ENV.SCENARIO||"small",u=new t.SharedArray("assets",(function(){return{small:[{count:36,size:5,unit:"MB"},{count:4,size:30,unit:"MB"}],medium:[{count:240,size:5,unit:"MB"},{count:25,size:32,unit:"MB"}],large:[{count:1,size:3,unit:"GB"},{count:1,size:7,unit:"GB"}]}[c].map((function(e){return{count:e.count,asset:a.buildAsset({size:e.size,unit:e.unit})}}))}));exports.default=function(){var t=__ENV.USER_LOGIN?"".concat(__ENV.USER_LOGIN.split("@")[0],"-").concat(__VU,"@").concat(__ENV.USER_LOGIN.split("@")[1]):"admin",n=__ENV.USER_PASSWORD?"".concat(__ENV.USER_PASSWORD,"-").concat(__VU):"admin",r=new a.Factory({login:t,password:n}),i=r.account,c=r.credential,o=i.login;u.forEach((function(t){var n=t.asset,r=t.count;e.times_1(r,(function(e){var t="".concat(o,"-").concat(e,"-").concat(a.randomString());s.davFilesCreate.exec({credential:c,userName:o,path:t}),s.davFilesUpload.exec({credential:c,userName:o,asset:n,path:t}),s.davFilesDelete.exec({credential:c,userName:o,path:t})}))})),s.davTrashBinDelete.exec({credential:c,userName:o})};
